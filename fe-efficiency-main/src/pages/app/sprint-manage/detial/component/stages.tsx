import { Card } from 'antd';
import type { ISprintDetial } from '@/services/app/sprint-detial';

import styles from './../index.module.less';

interface IStages {
  handleToggleStage: (stage: number) => void;
  stages: ISprintDetial['stages'];
  selectStageId: number;
}

const SprintDetial: React.FC<IStages> = ({ stages = [], handleToggleStage, selectStageId }) => {
  return (
    <div className={styles.stages}>
      {stages.map((item, index) => {
        // 灰蓝绿

        const select = item.id == selectStageId ? styles.select : '';
        const bg = {
          0: '',
          1: styles.progress,
          2: styles.progress,
          3: styles.compete,
        };

        return (
          <div
            style={{ display: 'flex' }}
            key={item.id}
            onClick={() => {
              if (item.status !== 0) {
                handleToggleStage(item.id);
              }
            }}
          >
            <Card key={item.id} className={`${styles.stageItem} ${select} ${bg[item.status]}`}>
              {item.name}
            </Card>
            {index !== stages.length - 1 && (
              <div className={styles.arrow}>
                {item.status >= 1 ? (
                  <svg
                    width="35.000000"
                    height="25.000000"
                    viewBox="0 0 35 25"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <g>
                      <path
                        d="M2.32764 9.66235C2.80615 9.42065 3.55859 9.2998 4.58545 9.2998C5.05176 9.2998 5.78711 9.30396 6.79004 9.31226C7.79346 9.3208 8.86084 9.32495 9.99268 9.32495C11.1245 9.32495 12.2271 9.3291 13.3003 9.3374C14.3735 9.3457 15.2251 9.34985 15.8555 9.34985C16.7417 9.36646 17.4419 9.31226 17.9551 9.18726C18.4688 9.06226 18.7251 8.7749 18.7251 8.32495C18.7251 7.99146 18.7427 7.5957 18.7778 7.13745C18.813 6.67896 18.8301 6.2832 18.8301 5.94995C18.8535 5.36646 19.0869 4.99561 19.5303 4.8374C19.9736 4.67896 20.5337 4.7998 21.2104 5.19995C21.9102 5.59985 22.7271 6.07495 23.6602 6.62476C24.5938 7.1748 25.562 7.7373 26.5654 8.31226C27.5684 8.88745 28.5483 9.4541 29.5054 10.0125C30.4619 10.5708 31.3135 11.0581 32.0601 11.4749C32.7368 11.8748 33.0811 12.2542 33.0928 12.6123C33.1045 12.9707 32.7837 13.3416 32.1304 13.7249C31.4536 14.1248 30.6543 14.5833 29.7329 15.0999C28.811 15.6165 27.8545 16.1499 26.8628 16.7C25.8711 17.2498 24.897 17.7957 23.9404 18.3374C22.9834 18.8792 22.1318 19.3582 21.3853 19.7749C20.5684 20.2415 19.8979 20.4165 19.3726 20.2998C18.8477 20.1831 18.5967 19.825 18.6201 19.2249L18.6201 18.6248L18.6201 17.8999C18.6201 17.6499 18.6143 17.4041 18.6025 17.1624C18.5913 16.9207 18.5854 16.7 18.5854 16.4998C18.5854 16.0833 18.4102 15.8208 18.0601 15.7124C17.7104 15.604 17.2319 15.5498 16.6255 15.5498C15.9487 15.5498 15.062 15.5457 13.9653 15.5374C12.8687 15.5291 11.7251 15.5249 10.5352 15.5249C9.34521 15.5249 8.19043 15.5208 7.07031 15.5125C5.9502 15.5042 5.04004 15.4998 4.34033 15.4998C4.03711 15.4998 3.72168 15.479 3.39502 15.4373C3.06836 15.3958 2.771 15.3167 2.50293 15.2C2.23438 15.0833 2.01855 14.9124 1.85547 14.6873C1.69189 14.4624 1.61035 14.1582 1.61035 13.7749C1.61035 13.325 1.60449 12.8916 1.59277 12.4749C1.58105 12.0581 1.58691 11.5916 1.61035 11.075C1.61035 10.3748 1.84961 9.90405 2.32764 9.66235Z"
                        stroke="#1890FF"
                      />
                    </g>
                    <defs>
                      <rect width="35.000000" height="25.000000" fill="white" />
                    </defs>
                  </svg>
                ) : (
                  <svg
                    width="31.506348"
                    height="15.564697"
                    viewBox="0 0 31.5063 15.5647"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M0.0234375 6.30493C0.0234375 5.60474 0.262695 5.13403 0.740723 4.89233C1.21924 4.65063 1.97168 4.52979 2.99854 4.52979C3.46484 4.52979 4.2002 4.53394 5.20312 4.54224C6.20654 4.55078 7.27393 4.55493 8.40576 4.55493C9.5376 4.55493 10.6401 4.55908 11.7134 4.56738C12.7866 4.57568 13.6382 4.57983 14.2686 4.57983C15.1548 4.59644 15.855 4.54224 16.3682 4.41724C16.8818 4.29224 17.1382 4.00488 17.1382 3.55493C17.1382 3.22144 17.1558 2.82568 17.1909 2.36743C17.2261 1.90894 17.2432 1.51318 17.2432 1.17993C17.2666 0.596436 17.5 0.225586 17.9434 0.0673828C18.3867 -0.0910645 18.9468 0.0297852 19.6235 0.429932C20.3232 0.829834 21.1401 1.30493 22.0732 1.85474C23.0068 2.40479 23.9751 2.96729 24.9785 3.54224C25.9814 4.11743 26.9614 4.68408 27.9185 5.24243C28.875 5.80078 29.7266 6.28809 30.4731 6.70483C31.1499 7.10474 31.4941 7.48413 31.5059 7.84229C31.5176 8.20068 31.1968 8.57153 30.5435 8.95483C29.8667 9.35474 29.0674 9.81323 28.146 10.3298C27.2241 10.8464 26.2676 11.3799 25.2759 11.9299C24.2842 12.4797 23.3101 13.0256 22.3535 13.5674C21.3965 14.1091 20.5449 14.5881 19.7983 15.0049C18.9814 15.4714 18.311 15.6465 17.7856 15.5298C17.2607 15.4131 17.0098 15.0549 17.0332 14.4548L17.0332 13.8547L17.0332 13.1299C17.0332 12.8799 17.0273 12.634 17.0156 12.3923C17.0044 12.1506 16.9985 11.9299 16.9985 11.7297C16.9985 11.3132 16.8232 11.0508 16.4731 10.9424C16.1235 10.834 15.645 10.7798 15.0386 10.7798C14.3618 10.7798 13.4751 10.7756 12.3784 10.7673C11.2817 10.759 10.1382 10.7549 8.94824 10.7549C7.7583 10.7549 6.60352 10.7507 5.4834 10.7424C4.36328 10.7341 3.45312 10.7297 2.75342 10.7297C2.4502 10.7297 2.13477 10.709 1.80811 10.6672C1.48145 10.6257 1.18408 10.5466 0.916016 10.4299C0.647461 10.3132 0.431641 10.1423 0.268555 9.91724C0.10498 9.69238 0.0234375 9.38818 0.0234375 9.00488C0.0234375 8.55493 0.0175781 8.12158 0.00585938 7.70483C-0.00585938 7.28809 0 6.82153 0.0234375 6.30493Z"
                      fill="#DDDDDD"
                    />
                    <defs />
                  </svg>
                )}
              </div>
            )}
          </div>
        );
      })}
    </div>
  );
};
export default SprintDetial;
